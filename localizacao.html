<html lang="en">
<head>
    <title>Geolocation demo</title>
    <meta charset="utf-8" />
</head>
<body>
    <h1>Demonstração de geolocalização</h1>
    <p>
        Descubra aproximadamente onde você está.
    </p>
    <p>
        Passo 1: <button onclick="setView()">Mostrar map</button>
    </p>
    <p>
        Passo 2: quando solicitado, permita que seu local seja compartilhado para ver a geolocalização em ação
    </p>
    <div id="mapid" style="height: 500px"></div>
    
    <script>
        var mymap = L.map('mapid').setView([51.505, -0.09], 13);
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 18,
    id: 'mapbox.streets',
    accessToken: 'pk.eyJ1IjoiZWR1YWxsb2NoaW8iLCJhIjoiY2pvZTVpMTF3MWpoeDNybWtpZXR5anlvOCJ9.IYfDmDnM_lwRIeM5N2STpg'
}).addTo(mymap);
        
        function locateFail(geoPositionError) {
            switch (geoPositionError.code) {
                case 0: 
                    alert('Ocorreu um erro desconhecido, desculpe');
                    break;
                case 1: 
                    alert('A permissão para usar a geolocalização foi negada');
                    break;
                case 2: 
                    alert('Não te encontrei ...');
                    break;
                case 3: 
                    alert('The Geolocation request took too long and timed out');
                    break;
                default:
            }
        }
        // Draw blue circle on top of user's location
        navigator.geolocation.getCurrentPosition(f1);
        //Funcionou
        function f1(pos){

            var  lat = pos.coords.latitude;
            var  long = pos.coords.longitude;
        
            mymap.setView([lat, long], 13);
            
}
/*
function deg2rad(deg) {
  return deg * (Math.PI/180)
}
  */  
    </script>
<body>
<html>